<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cảm Biến Do Thám Môi Trường</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('https://cellphones.com.vn/sforum/wp-content/uploads/2024/03/hinh-nen-PowerPoint-bao-ve-moi-truong-2.jpg');
            background-size: cover;
            background-position: center;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .section {
            margin-bottom: 40px;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        }

        .info-container, .device-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .info-item, .device-item {
            display: flex;
            align-items: center;
            flex: 1;
            min-width: 150px;
            margin: 10px;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background-color: #f8f8f8;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

            .info-item:hover, .device-item:hover {
                transform: scale(1.05);
            }

        .info-icon, .device-icon {
            width: 50px;
            height: 50px;
            margin-right: 10px;
        }

        .info-value, .device-status {
            font-size: 15px;
            font-weight: bold;
            color: #555;
        }

        .settings-button {
            margin-top: 10px;
            padding: 8px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: transform 0.3s;
        }

            .settings-button:hover {
                transform: scale(1.1);
            }

        .settings-icon {
            width: 40px;
            height: 40px;
        }

        .popup {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .popup-content {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .confirmSettings {
            background-color: #4CAF50; /* Màu xanh */
            margin-top: 10px;
            padding: 8px 12px;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
            .confirmSettings:hover {
                background-color: #45a049; /* Màu xanh đậm khi hover */
            }

        .close-button {
            margin-top: 10px;
            padding: 8px 12px;
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

            .close-button:hover {
                background-color: #d32f2f;
            }

        .input-field {
            margin: 10px 0;
        }

            .input-field input {
                padding: 8px;
                width: 80%;
                border: 1px solid #ccc;
                border-radius: 5px;
                transition: border-color 0.3s;
            }

                .input-field input:focus {
                    border-color: #4CAF50;
                    outline: none;
                }

        .mode-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

            .mode-container div {
                margin-right: 10px;
                font-size: 18px;
                font-weight: bold;
                color: #333;
            }

        .buttonCD {
            background-color: #FF0000; /* Màu nền */
            color: white; /* Màu chữ */
            padding: 8px 25px; /* Khoảng cách bên trong */
            border: none; /* Bỏ viền */
            border-radius: 5px; /* Bo góc */
            font-size: 15px; /* Kích thước chữ */
            cursor: pointer; /* Con trỏ chuột */
            transition: background-color 0.3s, transform 0.2s; /* Hiệu ứng chuyển màu và phóng to */
        }

            .buttonCD:hover {
                background-color: #EE0000; /* Màu nền khi hover */
                transform: scale(1.05); /* Phóng to nhẹ khi hover */
            }

            .buttonCD:active {
                transform: scale(0.95); /* Thu nhỏ khi nhấn */
            }
        .buttonDB {
            background-color: #008000; /* Màu nền */
            color: white; /* Màu chữ */
            padding: 8px 25px; /* Khoảng cách bên trong */
            border: none; /* Bỏ viền */
            border-radius: 5px; /* Bo góc */
            font-size: 15px; /* Kích thước chữ */
            cursor: pointer; /* Con trỏ chuột */
            transition: background-color 0.3s, transform 0.2s; /* Hiệu ứng chuyển màu và phóng to */
        }

            .buttonDB:hover {
                background-color: #00FF00; /* Màu nền khi hover */
                transform: scale(1.05); /* Phóng to nhẹ khi hover */
            }

            .buttonDB:active {
                transform: scale(0.95); /* Thu nhỏ khi nhấn */
            }

        .buttonTT {
            background-color: #4CAF50; /* Màu nền */
            color: white; /* Màu chữ */
            padding: 5px 15px; /* Khoảng cách bên trong */
            border: none; /* Bỏ viền */
            border-radius: 5px; /* Bo góc */
            font-size: 10px; /* Kích thước chữ */
            cursor: pointer; /* Con trỏ chuột */
            transition: background-color 0.3s, transform 0.2s; /* Hiệu ứng chuyển màu và phóng to */
        }

            .buttonTT:hover {
                background-color: #45a049; /* Màu nền khi hover */
                transform: scale(1.05); /* Phóng to nhẹ khi hover */
            }

            .buttonTT:active {
                transform: scale(0.95); /* Thu nhỏ khi nhấn */
            }
        .device-name {
            font-weight: bold; /* In đậm */
            margin-bottom: 5px; /* Khoảng cách dưới chữ "Bơm" */
        }

        .device-status {
            display: inline-block; /* Hiển thị dưới dạng khối nội tuyến */
            width: 100px; /* Cố định chiều rộng */
            text-align: center; /* Căn giữa chữ */
            white-space: nowrap; /* Ngăn không cho chữ nhảy dòng */
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Cảm Biến Do Thám Môi Trường</h1>

        <div class="settings-container" style="display: flex; justify-content: space-between; align-items: center;">
            <div class="mode-container">
		<strong style="margin-right: 20px;"></strong> <!-- Tạo khoảng cách -->
		<button class="buttonDB" onclick="goBack()">Dự Báo Thời Tiết</button>
            </div>
   
        </div>

        <div class="section">
            <h2>Thông Số Môi Trường</h2>
            <div class="info-container">
         
                <div class="info-item">
                    <img src="https://img.icons8.com/color/50/000000/temperature.png" class="info-icon" alt="Nhiệt độ">
                    <div>
                        <div>Nhiệt độ</div>
                        <div class="info-value" id="ND">20 độ C</div>
                    </div>
                </div>

                <div class="info-item">
                    <img src="https://img.icons8.com/color/50/000000/humidity.png" class="info-icon" alt="Độ ẩm không khí">
                    <div>
                        <div>Độ ẩm không khí</div>
                        <div class="info-value" id="DA">60%</div>
                    </div>
                </div>

                <div class="info-item">
                        <img id="logocbas" src="https://img.icons8.com/color/50/000000/moon.png" class="info-icon" alt="Buổi tối">
                        <div>
                            <div id="textcbas">Buổi Tối</div>
                        </div>
                </div>

                <div class="info-item" >
                    <img id="logocbm" src="https://img.icons8.com/color/50/000000/rain.png" class="info-icon" alt="Trời mưa">
                    <div>
                        <div id="textcbm">Trời Mưa</div>
                    </div>
                </div>

                <div class="info-item">
                    <img src="https://img.icons8.com/color/50/000000/water.png" class="info-icon" alt="Mực nước">
                    <div>
                        <div>Mực Nước</div>
                        <div  id="textcbmn" class="info-value">Cao</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="popup" id="settingsPopup">
        <div class="popup-content">
            <h2>Thông Số Cài Đặt</h2>
            <div class="input-field">
                <label for="temperature">Nhiệt độ đặt:</label>
                <input type="number" id="temperature" placeholder="Nhập nhiệt độ" />
            </div>
            <div class="input-field">
                <label for="humidity">Độ ẩm đặt:</label>
                <input type="number" id="humidity" placeholder="Nhập độ ẩm" />
            </div>
            <button class="confirmSettings" onclick="confirmSettings()">Xác Nhận</button>
            <button class="close-button" onclick="closePopup()">Đóng</button>
        </div>
    </div>

    <script>
        function openPopup() {
            document.getElementById('settingsPopup').style.display = 'flex';
            loadCurrentSettings();
        }

        function closePopup() {
            document.getElementById('settingsPopup').style.display = 'none';
        }

        function loadCurrentSettings() {
            const temperatureRef = firebase.database().ref('GiaTriDat/ND');
            const humidityRef = firebase.database().ref('GiaTriDat/DA');

            temperatureRef.once('value').then(snapshot => {
                const currentTemperature = snapshot.val();
                document.getElementById('temperature').value = currentTemperature || ''; // Đặt giá trị hoặc để trống nếu không có
            });

            humidityRef.once('value').then(snapshot => {
                const currentHumidity = snapshot.val();
                document.getElementById('humidity').value = currentHumidity || ''; // Đặt giá trị hoặc để trống nếu không có
            });
        }

        function confirmSettings() {
            const temperature = document.getElementById('temperature').value;
            const humidity = document.getElementById('humidity').value;

            // Gửi giá trị mới lên Firebase
            firebase.database().ref('GiaTriDat/ND').set(temperature);
            firebase.database().ref('GiaTriDat/DA').set(humidity);

            closePopup();
        }
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>
    <script>
        // Cấu hình Firebase của bạn
        const firebaseConfig = {
            apiKey: "AIzaSyAVb7CKc2LS9okIpT6sfEjyytaM2Pa5CRs",
            authDomain: "loraras.firebaseapp.com",
            projectId: "loraras",
            storageBucket: "loraras.appspot.com",
            messagingSenderId: "38848964775",
            appId: "1:38848964775:web:2215d9c343dd57784c9382",
            measurementId: "G-FTR3DHBGK6"
        };
        // Khởi tạo Firebase
        firebase.initializeApp(firebaseConfig);
    </script>

    <script>
        // Hàm lắng nghe sự thay đổi trạng thái thiết bị

        document.addEventListener("DOMContentLoaded", function () {
            var temperatureRef = firebase.database().ref('CamBien/ND');

            temperatureRef.on('value', function (snapshot) {
                var temperatureValue = snapshot.val();
                var temperatureElement = document.getElementById('ND');

                // Cập nhật giá trị nhiệt độ trong div
                temperatureElement.textContent = temperatureValue + ' độ C';
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            var temperatureRef = firebase.database().ref('CamBien/DA');

            temperatureRef.on('value', function (snapshot) {
                var temperatureValue = snapshot.val();
                var temperatureElement = document.getElementById('DA');

                // Cập nhật giá trị nhiệt độ trong div
                temperatureElement.textContent = temperatureValue + ' %';
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            var cbASRef = firebase.database().ref('CamBien/CBAS');

            cbASRef.on('value', function (snapshot) {
                var cbASValue = snapshot.val();
                var logoCBAS = document.getElementById('logocbas');
                var textCBAS = document.getElementById('textcbas');

                if (cbASValue === "0") {
                    logoCBAS.src = "https://img.icons8.com/color/50/000000/sun.png"; // Logo Buổi sáng
                    textCBAS.textContent = "Buổi Sáng";
                } else if (cbASValue === "1") {
                    logoCBAS.src = "https://img.icons8.com/color/50/000000/moon.png"; // Logo Buổi tối
                    textCBAS.textContent = "Buổi Tối";
                }
            });
        });
        var cbMRef = firebase.database().ref('CamBien/CBM');
        cbMRef.on('value', function (snapshot) {
            var cbMValue = snapshot.val();
            var logoCBM = document.getElementById('logocbm');
            var textCBM = document.getElementById('textcbm');

            if (cbMValue === "0") {
                logoCBM.src = "https://img.icons8.com/color/50/000000/rain.png"; // Logo Trời mưa
                textCBM.textContent = "Trời Mưa";
            } else if (cbMValue === "1") {
                logoCBM.src = "https://img.icons8.com/?size=100&id=19543&format=png&color=000000"; // Logo Trời trong
                textCBM.textContent = "Trời Trong";
            }
        });
        var cbmnRef = firebase.database().ref('CamBien/CBMN');
        cbmnRef.on('value', function (snapshot) {
            var cbmnValue = snapshot.val();
            var textCBMN = document.getElementById('textcbmn');

            if (cbmnValue === "0") {
                textCBMN.textContent = "Cao";
            } else if (cbmnValue === "1") {
                textCBMN.textContent = "Thấp";
            }
        });


    // Hàm quay lại trang chính (Main.html)
    function goBack() {
      window.location.href = "dashboard.html"; // Điều hướng tới trang Main.html
    }

    </script>





</body>
</html >
